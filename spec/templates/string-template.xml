<?xml version="1.0" encoding="UTF-8"?>
<fest:template xmlns:fest="http://fest.mail.ru">
<div>

	<fest:var name="string">STRING</fest:var>
	<fest:var name="template">TEMPLATE</fest:var>

	<div>This string contains ${string} $\{ $\{ ${template} }</div>
	<div>Another string with <b>${template}</b></div>

	<div>
		String template with function inside.
		Function: ${(function(){ return "${function}" })()}
	</div>

	<fest:script>
		var block = 'b-block';
		var element = '__element';
		var modifier = '_modifier';
	</fest:script>

	<fest:set name="modify">
		<fest:value>params.block</fest:value>
		<fest:value>params.element</fest:value>
		<fest:value>modifier</fest:value>
	</fest:set>

	<div>
		&lt;div class="${block}#{asd}"
			 data-amp="${'&amp;'}"
			 data-lt="${'&lt;'}"
			 data-gt="${'&gt;'}"
			 data-apos="${'\&apos;'}"
			 data-quot="${'\&quot;'}"
			 data-elcb="${'{'}"
			 data-ercb="${'}'}"
			 data-lcb1="\$\{{"
			 data-lcb2="$\{{"
			 data-rcb="$}}"
			 data-ecb="${'{}'}"
			 data-escape="\${'1'}"&gt;
			&lt;div class="${block}${modifier}" data-has-modifier="${!!(block && modifier)}"/&gt;
			&lt;div class="${block + element}" data-obj-value="${ { 'key': 'value' }['key'] }" data-obj-json="{{ &quot;key&quot;: &quot;value&quot; }}"&gt;
				&lt;span class="${'name'}" data-spec-chars="{{&lt;&quot;&apos;&amp;&gt;}}" data-espec-chars="${'{&lt;&quot;\&apos;&amp;&gt;}'}"&gt;
					&lt;fest:get name="modify"&gt;{ "block": block, "element": element }&lt;/fest:get&gt;
				&lt;/span&gt;
			&lt;/div&gt;
		&lt;/div&gt;
		&lt;fest:for iterate="[1,2,3,4,5].filter(function(item){return item !== 3})" index="item" value="value"&gt;
			&lt;fest:value&gt;value&lt;/fest:value&gt;
		&lt;/fest:for&gt;

		<fest:script>
			var a = 'A';
			var b = 'B';
		</fest:script>
		&lt;div data-lf="a&#x0A;&#x0D;b" data-backslash="\" data-apos="&apos;" data-quot="&quot;" data-block="${a}{" data-block-with-text="}a${b}{c}"&gt;&lt;/div&gt;
	</div>

</div>
</fest:template>
